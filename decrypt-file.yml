parameters:
  input_file: ''
  output_file: ''
  key: ''

steps:
- task: PowerShell@2
  displayName: Decrypt File
  inputs:
    targetType: 'inline'
    script: |
      Write-Host "$(KEY)"
      Write-Host "$(key)"
      Write-Host "$env:KEY")

      openssl aes-256-cbc -d -in '${{ parameters.input_file }}' -out '${{ parameters.output_file }}' -k '$(KEY)'
  env:
    KEY: $(key)
