pool: 'Default'

steps:
- task: UseDotNet@2
  inputs:
    packageType: 'sdk'
    version: '5.x'
    installationPath: $(Agent.ToolsDirectory)/dotnet
  displayName: 'Install'

- task: DotNetCoreCLI@2
  inputs:
    command: 'restore'
    projects: '**/*.csproj'
  displayName: 'Restore'

- task: DotNetCoreCLI@2
  inputs:
    command: 'build'
    projects: '**/*.csproj'
  displayName: 'Build'

- task: DotNetCoreCLI@2
  inputs:
    command: 'publish'
    arguments: '--configuration Release --output $(Build.ArtifactStagingDirectory)/publish'
    projects: '**/*.csproj'
  displayName: 'Publish'

- task: AzureWebApp@1
  inputs:
    azureSubscription: 'AzureServiceConnection'
    appType: 'webAppLinux'
    appName: 'dev-hancock'
    package: '$(Build.ArtifactStagingDirectory)/publish'
    deploymentMethod: 'auto'
  displayName: 'Deploy'
